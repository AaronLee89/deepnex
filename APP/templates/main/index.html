{% extends 'base.html' %}

{% block header_ext %}
{% endblock %}

{% block content %}
    <section class="content-header">
      <h1>
        我的主页
        <small>集群应用的统计详情</small>
      </h1>
      <ol class="breadcrumb">
        <li style="font-size: 18px;"><a href="#"><i class="fa fa-dashboard"></i> 主页</a></li>
        <li class="active" style="font-size: 18px;">统计</li>
      </ol>
    </section>

    <section class="content container-fluid">
    <div class="row">
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-aqua">
            <div class="inner">
              <h3>15</h3>

              <p>命名空间数量</p>
            </div>
            <div class="icon">
              <i class="ion ion-cube"></i>
            </div>
            <a href="#" class="small-box-footer">更多详情 <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-yellow">
            <div class="inner">
              <h3>14</h3>

              <p>计算节点数量</p>
            </div>
            <div class="icon">
              <i class="ion ion-android-desktop"></i>
            </div>
            <a href="#" class="small-box-footer">更多详情 <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-light-blue">
            <div class="inner">
              <h3>5</h3>

              <p>服务数量</p>
            </div>
            <div class="icon">
              <i class="ion ion-android-list"></i>
            </div>
            <a href="#" class="small-box-footer">更多详情 <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-green">
            <div class="inner">
              <h3>53<sup style="font-size: 20px">%</sup></h3>

              <p>资源使用率</p>
            </div>
            <div class="icon">
              <i class="ion ion-stats-bars"></i>
            </div>
            <a href="#" class="small-box-footer">更多详情 <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
          <div class="box">
            <div class="box-header with-border">
              <h3 class="box-title">一周内集群运行情况</h3>
              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
              </div>
            </div>
            <div class="box-body">
              <div id="chart-1" style="height: 300px;">

              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="box">
            <div class="box-header with-border">
              <h3 class="box-title">集群计算节点分布图</h3>
              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
              </div>
            </div>
            <div class="box-body">
              <div id="chart-2" style="height: 300px;">

              </div>
            </div>
          </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-4">
            <div class="box">
              <div class="box-header">
                <h3 class="box-title">用户个人情况统计</h3>
                <div class="box-tools pull-right">
                  <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                  </button>
                </div>
              </div>
              <div class="box-body no-padding">
                <div style="height: 170px;">
                    <table class="table table-condensed">
                    <tbody>
                    <tr>
                      <td style="width: 23%">个人资料完整度</td>
                      <td style="width: 65%">
                        <div class="progress progress-xs">
                          <div class="progress-bar progress-bar-blue" style="width: 55%"></div>
                        </div>
                      </td>
                      <td><span class="badge bg-light-blue">55%</span></td>
                    </tr>
                    <tr>
                      <td>教程学习进度</td>
                      <td>
                        <div class="progress progress-xs">
                          <div class="progress-bar progress-bar-blue" style="width: 70%"></div>
                        </div>
                      </td>
                      <td><span class="badge bg-light-blue">70%</span></td>
                    </tr>
                    <tr>
                      <td>命名空间使用率</td>
                      <td>
                        <div class="progress progress-xs">
                          <div class="progress-bar progress-bar-blue" style="width: 100%"></div>
                        </div>
                      </td>
                      <td><span class="badge bg-light-blue">100%</span></td>
                    </tr>
                    <tr>
                      <td>服务使用率</td>
                      <td>
                        <div class="progress progress-xs">
                          <div class="progress-bar progress-bar-blue" style="width: 30%"></div>
                        </div>
                      </td>
                      <td><span class="badge bg-light-blue">30%</span></td>
                    </tr>
                    <tr>
                      <td>节点使用率</td>
                      <td>
                        <div class="progress progress-xs">
                          <div class="progress-bar progress-bar-blue" style="width: 90%"></div>
                        </div>
                      </td>
                      <td><span class="badge bg-light-blue">90%</span></td>
                    </tr>
                  </tbody></table>
                </div>
              </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="box">
              <div class="box-header with-border">
                <h3 class="box-title">系统公告</h3>
                <div class="box-tools pull-right">
                  <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                  </button>
                </div>
              </div>
              <div class="box-body">
                <div style="height: 150px;">
                    <p><a href="#">关于规范创建集群应用的通知</a><span style="margin-right: 10px;" class="pull-right">03-21</span></p>
                    <p><a href="#">关于实行用户实名制的通知</a><span style="margin-right: 10px;" class="pull-right">03-21</span></p>
                    <p><a href="#">关于统计所有用户数据的具体通知</a><span style="margin-right: 10px;" class="pull-right">03-21</span></p>
                </div>
              </div>
            </div>
        </div>
    </div>

    </section>
    <!-- /.content -->
{% endblock %}

{% block footer_ext %}
    <script src="{{ url_for('static',filename='js/echarts.js') }}"></script>

    <script>
        $(document).ready(function(){
            load_chart1();
            load_chart2();
        });
    </script>

    <!-- 加载图表的工具函数 -->
    <script>
        function load_chart1() {
            var chart = echarts.init(document.getElementById('chart-1'));
            var option = {
                tooltip : {
                    trigger: 'axis'
                },
                legend: {
                    data:['Spark集群','Hadoop集群']
                },
                toolbox: {
                    show : true,
                    feature : {
                        dataView : {show: true, readOnly: false},
                        magicType : {show: true, type: ['line', 'bar']},
                        restore : {show: true},
                        saveAsImage : {show: true}
                    }
                },
                calculable : true,
                xAxis : [
                    {
                        type : 'category',
                        data : ['周一','周二','周三','周四','周五','周六','周日']
                    }
                ],
                yAxis : [
                    {
                        type : 'value'
                    }
                ],
                series : [
                    {
                        name:'Spark集群',
                        type:'bar',
                        data:[2, 4, 7, 23, 25, 33, 3],
                        itemStyle : {
                            normal:{color:'#ff7f50'}
                        }
                    },
                    {
                        name:'Hadoop集群',
                        type:'bar',
                        data:[2, 5, 9, 26, 28, 6, 2],
                        itemStyle : {
                            normal:{color:'grey'}
                        }
                    }
                ]
            };
            chart.setOption(option);
        }

        function load_chart2() {
            var chart = echarts.init(document.getElementById('chart-2'));
            var option = {
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                legend: {
                    orient: 'vertical',
                    left: 'left',
                    data: ['深度学习集群','Spark集群','Hadoop集群']
                },
                series : [
                    {
                        name: '节点数量',
                        type: 'pie',
                        radius : '55%',
                        center: ['50%', '60%'],
                        data:[
                            {value:33, name:'深度学习集群'},
                            {value:31, name:'Spark集群'},
                            {value:23, name:'Hadoop集群'}
                        ],
                        itemStyle: {
                            emphasis: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }
                ]
            };
            chart.setOption(option);
        }
    </script>



{% endblock %}