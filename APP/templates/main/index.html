{% extends 'base.html' %}

{% block header_ext %}
{% endblock %}

{% block content %}
    <section class="content-header">
      <h1>
        我的主页
        <small>统计与详情</small>
      </h1>
      <ol class="breadcrumb">
        <li class="active" style="font-size: 18px;"><i class="fa fa-dashboard"></i> 主页</li>
{#        <li class="active" style="font-size: 18px;">统计</li>#}
      </ol>
    </section>

    <section class="content container-fluid">
    {% if current_user.is_auth != 1 %}
    <div class="alert alert-warning alert-dismissible">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
        <h4><i class="icon fa fa-warning"></i> 您目前尚未通过管理员的认证</h4>
        请在个人设置里完善您的资料，以便您尽快通过认证来获得本系统更高权限的服务。
    </div>
    {% endif %}
    <div class="row">
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-aqua">
            <div class="inner">
              <h3>75<sup style="font-size: 20px">%</sup></h3>

              <p>用户资料完整度</p>
            </div>
            <div class="icon">
              <i class="ion ion-cube"></i>
            </div>
            <a href="#" class="small-box-footer">更多详情 <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-orange">
            <div class="inner">
              <h3>14</h3>

              <p>应用实例数量</p>
            </div>
            <div class="icon">
              <i class="ion ion-android-desktop"></i>
            </div>
            <a href="#" class="small-box-footer">更多详情 <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-light-blue">
            <div class="inner">
              <h3>5</h3>

              <p>可用模板数量</p>
            </div>
            <div class="icon">
              <i class="ion ion-android-list"></i>
            </div>
            <a href="#" class="small-box-footer">更多详情 <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-green">
            <div class="inner">
              <h3>53<sup style="font-size: 20px">%</sup></h3>

              <p>资源使用率</p>
            </div>
            <div class="icon">
              <i class="ion ion-stats-bars"></i>
            </div>
            <a href="#" class="small-box-footer">更多详情 <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
          <div class="box box-info">
            <div class="box-header with-border">
                <h3 class="box-title"><i class="fa fa-bar-chart"></i> 集群一周内运行情况图</h3>
              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
              </div>
            </div>
            <div class="box-body">
              <div id="chart-1" style="height: 320px;">

              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="box box-info">
            <div class="box-header with-border">
                <h3 class="box-title"><i class="fa fa-pie-chart"></i> 集群实例分布图</h3>
              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
              </div>
            </div>
            <div class="box-body">
              <div id="chart-2" style="height: 320px;">

              </div>
            </div>
          </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-4">
            <div class="box">
              <div class="box-header with-border">
                <h3 class="box-title"><i class="fa fa-book"></i> 最新系统公告</h3>
                <div class="box-tools pull-right">
                  <button type="button" class="btn btn-box-tool"><i class="fa fa-ellipsis-h"></i></button>
                </div>
              </div>
              <div class="box-body">
                <div style="height: 180px">
                    <p><a href="#">关于规范创建集群应用的通知</a><span style="margin-right: 10px;" class="pull-right">03-23</span></p>
                    <p><a href="#">关于实行用户实名制的通知</a><span style="margin-right: 10px;" class="pull-right">03-21</span></p>
                    <p><a href="#">关于统计所有用户数据的具体通知</a><span style="margin-right: 10px;" class="pull-right">03-21</span></p>
                    <p><a href="#">关于规范创建集群应用的通知</a><span style="margin-right: 10px;" class="pull-right">03-21</span></p>
                    <p><a href="#">关于实行用户实名制的通知</a><span style="margin-right: 10px;" class="pull-right">03-21</span></p>
                </div>
              </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="box">
              <div class="box-header with-border">
                <h3 class="box-title"><i class="fa fa-align-left"></i> 近期新闻资讯</h3>
                <div class="box-tools pull-right">
                  <button type="button" class="btn btn-box-tool"><i class="fa fa-ellipsis-h"></i></button>
                </div>
              </div>
              <div class="box-body">
                <div style="height: 180px">
                    <p><a href="#">腾讯云峰会召开 深圳超算成为政府关注重点</a><span style="margin-right: 10px;" class="pull-right">03-23</span></p>
                    <p><a href="#">深圳超算助力广东大数据发展</a><span style="margin-right: 10px;" class="pull-right">03-21</span></p>
                    <p><a href="#">默生全球服务总裁Frank Bibens一行赴我中心参观交流</a><span style="margin-right: 10px;" class="pull-right">03-21</span></p>
                    <p><a href="#">圳市南山区委常委、统战部长鲍晓展一行来我中心参观交流</a><span style="margin-right: 10px;" class="pull-right">03-21</span></p>
                </div>
              </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="box">
              <div class="box-header with-border">
                <h3 class="box-title"><i class="fa fa-paper-plane"></i> 帮助中心</h3>
                <div class="box-tools pull-right">
                  <button type="button" class="btn btn-box-tool"><i class="fa fa-ellipsis-h"></i></button>
                </div>
              </div>
              <div class="box-body">
                <div style="height: 180px">
                    <p><a href="#">如何进行创建实例</a><span style="margin-right: 10px;" class="pull-right">03-23</span></p>
                    <p><a href="#">如何完善个人资料</a><span style="margin-right: 10px;" class="pull-right">03-21</span></p>
                    <p><a href="#">如何正确使用集群</a><span style="margin-right: 10px;" class="pull-right">03-21</span></p>
                    <p><a href="#">忘记密码怎么办</a><span style="margin-right: 10px;" class="pull-right">03-21</span></p>
                </div>
              </div>
            </div>
        </div>

    </div>


    </section>
    <!-- /.content -->
{% endblock %}

{% block footer_ext %}
    <script src="{{ url_for('static',filename='js/echarts.js') }}"></script>

    <script>
        $(document).ready(function(){
            load_chart1();
            load_chart2();
        });
    </script>

    <!-- 加载图表的工具函数 -->
    <script>
        function load_chart1() {
            var chart = echarts.init(document.getElementById('chart-1'));
            var option = {
                tooltip : {
                    trigger: 'axis'
                },
                legend: {
                    data:['Spark','Hadoop','Tensorflow']
                },
                toolbox: {
                    show : true,
                    feature : {
                        dataView : {show: true, readOnly: false},
                        magicType : {show: true, type: ['line', 'bar']},
                        restore : {show: true},
                        saveAsImage : {show: true}
                    }
                },
                calculable : true,
                xAxis : [
                    {
                        type : 'category',
                        data : ['周一','周二','周三','周四','周五','周六','周日']
                    }
                ],
                yAxis : [
                    {
                        type : 'value'
                    }
                ],
                series : [
                    {
                        name:'Spark',
                        type:'bar',
                        data:[2, 4, 7, 23, 25, 33, 3],
                        itemStyle : {
                            normal:{color:'#ff7f50'}
                        }
                    },
                    {
                        name:'Hadoop',
                        type:'bar',
                        data:[2, 5, 9, 26, 28, 6, 2],
                        itemStyle : {
                            normal:{color:'grey'}
                        }
                    },
                    {
                        name:'Tensorflow',
                        type:'bar',
                        data:[0, 8, 9, 2, 8, 6, 11],
                        itemStyle : {
                            normal:{color:'red'}
                        }
                    }
                ]
            };
            chart.setOption(option);
        }

        function load_chart2() {
            var chart = echarts.init(document.getElementById('chart-2'));
            var option = {
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                legend: {
                    orient: 'vertical',
                    left: 'left',
                    data: ['深度学习集群','Spark集群','Hadoop集群']
                },
                series : [
                    {
                        name: '实例数量',
                        type: 'pie',
                        radius : '55%',
                        center: ['50%', '60%'],
                        data:[
                            {value:33, name:'深度学习集群'},
                            {value:31, name:'Spark集群'},
                            {value:23, name:'Hadoop集群'}
                        ],
                        itemStyle: {
                            emphasis: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }
                ]
            };
            chart.setOption(option);
        }
    </script>



{% endblock %}